{"version":3,"file":"index.js","sources":["../../../src/utils.ts","../../../src/copier.ts","../../../src/options.ts","../../../src/index.ts"],"sourcesContent":["export interface Cache {\n  has: (value: any) => boolean;\n  set: (key: any, value: any) => void;\n  get: (key: any) => any;\n}\n\n// eslint-disable-next-line @typescript-eslint/unbound-method\nconst toStringFunction = Function.prototype.toString;\n// eslint-disable-next-line @typescript-eslint/unbound-method\nconst toStringObject = Object.prototype.toString;\n\n/**\n * Get an empty version of the object with the same prototype it has.\n */\nexport function getCleanClone(prototype: any): any {\n  if (!prototype) {\n    return Object.create(null);\n  }\n\n  const Constructor = prototype.constructor;\n\n  if (Constructor === Object) {\n    return prototype === Object.prototype ? {} : Object.create(prototype as object | null);\n  }\n\n  if (Constructor && ~toStringFunction.call(Constructor).indexOf('[native code]')) {\n    try {\n      return new Constructor();\n    } catch {\n      // Ignore\n    }\n  }\n\n  return Object.create(prototype as object | null);\n}\n\n/**\n * Get the tag of the value passed, so that the correct copier can be used.\n */\nexport function getTag(value: any): string {\n  const stringTag = value[Symbol.toStringTag];\n\n  if (stringTag) {\n    return stringTag;\n  }\n\n  const type = toStringObject.call(value);\n\n  return type.substring(8, type.length - 1);\n}\n","import { getCleanClone } from './utils.js';\nimport type { Cache } from './utils.ts';\n\nexport type InternalCopier<Value> = (value: Value, state: State) => Value;\n\nexport interface State {\n  Constructor: any;\n  cache: Cache;\n  copier: InternalCopier<any>;\n  prototype: any;\n}\n\n// eslint-disable-next-line @typescript-eslint/unbound-method\nconst { hasOwnProperty, propertyIsEnumerable } = Object.prototype;\n\nfunction copyOwnDescriptor<Value extends object>(\n  original: Value,\n  clone: Value,\n  property: string | symbol,\n  state: State,\n): void {\n  const ownDescriptor = Object.getOwnPropertyDescriptor(original, property) || {\n    configurable: true,\n    enumerable: true,\n    value: original[property as keyof Value],\n    writable: true,\n  };\n  const descriptor =\n    ownDescriptor.get || ownDescriptor.set\n      ? ownDescriptor\n      : {\n          configurable: ownDescriptor.configurable,\n          enumerable: ownDescriptor.enumerable,\n          value: state.copier(ownDescriptor.value, state),\n          writable: ownDescriptor.writable,\n        };\n\n  try {\n    Object.defineProperty(clone, property, descriptor);\n  } catch {\n    // The above can fail on node in extreme edge cases, so fall back to the loose assignment.\n    clone[property as keyof Value] = descriptor.get ? descriptor.get() : descriptor.value;\n  }\n}\n\n/**\n * Striclty copy all properties contained on the object.\n */\nfunction copyOwnPropertiesStrict<Value extends object>(value: Value, clone: Value, state: State): Value {\n  const names = Object.getOwnPropertyNames(value);\n\n  for (let index = 0; index < names.length; ++index) {\n    copyOwnDescriptor(value, clone, names[index]!, state);\n  }\n\n  const symbols = Object.getOwnPropertySymbols(value);\n\n  for (let index = 0; index < symbols.length; ++index) {\n    copyOwnDescriptor(value, clone, symbols[index]!, state);\n  }\n\n  return clone;\n}\n\n/**\n * Deeply copy the indexed values in the array.\n */\nexport function copyArrayLoose(array: any[], state: State) {\n  const clone = new state.Constructor();\n\n  // set in the cache immediately to be able to reuse the object recursively\n  state.cache.set(array, clone);\n\n  for (let index = 0; index < array.length; ++index) {\n    clone[index] = state.copier(array[index], state);\n  }\n\n  return clone;\n}\n\n/**\n * Deeply copy the indexed values in the array, as well as any custom properties.\n */\nexport function copyArrayStrict<Value extends any[]>(array: Value, state: State) {\n  const clone = new state.Constructor() as Value;\n\n  // set in the cache immediately to be able to reuse the object recursively\n  state.cache.set(array, clone);\n\n  return copyOwnPropertiesStrict(array, clone, state);\n}\n\n/**\n * Copy the contents of the ArrayBuffer.\n */\nexport function copyArrayBuffer<Value extends ArrayBufferLike>(arrayBuffer: Value, _state: State): Value {\n  return arrayBuffer.slice(0) as Value;\n}\n\n/**\n * Create a new Blob with the contents of the original.\n */\nexport function copyBlob<Value extends Blob>(blob: Value, _state: State): Value {\n  return blob.slice(0, blob.size, blob.type) as Value;\n}\n\n/**\n * Create a new DataView with the contents of the original.\n */\nexport function copyDataView<Value extends DataView>(dataView: Value, state: State): Value {\n  return new state.Constructor(copyArrayBuffer(dataView.buffer, state));\n}\n\n/**\n * Create a new Date based on the time of the original.\n */\nexport function copyDate<Value extends Date>(date: Value, state: State): Value {\n  return new state.Constructor(date.getTime());\n}\n\n/**\n * Deeply copy the keys and values of the original.\n */\nexport function copyMapLoose<Value extends Map<any, any>>(map: Value, state: State): Value {\n  const clone = new state.Constructor() as Value;\n\n  // set in the cache immediately to be able to reuse the object recursively\n  state.cache.set(map, clone);\n\n  map.forEach((value, key) => {\n    clone.set(key, state.copier(value, state));\n  });\n\n  return clone;\n}\n\n/**\n * Deeply copy the keys and values of the original, as well as any custom properties.\n */\nexport function copyMapStrict<Value extends Map<any, any>>(map: Value, state: State) {\n  return copyOwnPropertiesStrict(map, copyMapLoose(map, state), state);\n}\n\n/**\n * Deeply copy the properties (keys and symbols) and values of the original.\n */\nexport function copyObjectLoose<Value extends Record<string, any>>(object: Value, state: State): Value {\n  const clone = getCleanClone(state.prototype);\n\n  // set in the cache immediately to be able to reuse the object recursively\n  state.cache.set(object, clone);\n\n  for (const key in object) {\n    if (hasOwnProperty.call(object, key)) {\n      clone[key] = state.copier(object[key], state);\n    }\n  }\n\n  const symbols = Object.getOwnPropertySymbols(object);\n\n  for (let index = 0; index < symbols.length; ++index) {\n    const symbol = symbols[index]!;\n\n    if (propertyIsEnumerable.call(object, symbol)) {\n      clone[symbol] = state.copier((object as any)[symbol], state);\n    }\n  }\n\n  return clone;\n}\n\n/**\n * Deeply copy the properties (keys and symbols) and values of the original, as well\n * as any hidden or non-enumerable properties.\n */\nexport function copyObjectStrict<Value extends Record<string, any>>(object: Value, state: State): Value {\n  const clone = getCleanClone(state.prototype);\n\n  // set in the cache immediately to be able to reuse the object recursively\n  state.cache.set(object, clone);\n\n  return copyOwnPropertiesStrict(object, clone, state);\n}\n\n/**\n * Create a new primitive wrapper from the value of the original.\n */\nexport function copyPrimitiveWrapper<\n  // Specifically use the object constructor types\n  // eslint-disable-next-line @typescript-eslint/no-wrapper-object-types\n  Value extends Boolean | Number | String,\n>(primitiveObject: Value, state: State): Value {\n  return new state.Constructor(primitiveObject.valueOf());\n}\n\n/**\n * Create a new RegExp based on the value and flags of the original.\n */\nexport function copyRegExp<Value extends RegExp>(regExp: Value, state: State): Value {\n  const clone = new state.Constructor(regExp.source, regExp.flags) as Value;\n\n  clone.lastIndex = regExp.lastIndex;\n\n  return clone;\n}\n\n/**\n * Return the original value (an identity function).\n *\n * @note\n * THis is used for objects that cannot be copied, such as WeakMap.\n */\nexport function copySelf<Value>(value: Value, _state: State): Value {\n  return value;\n}\n\n/**\n * Deeply copy the values of the original.\n */\nexport function copySetLoose<Value extends Set<any>>(set: Value, state: State): Value {\n  const clone = new state.Constructor() as Value;\n\n  // set in the cache immediately to be able to reuse the object recursively\n  state.cache.set(set, clone);\n\n  set.forEach((value) => {\n    clone.add(state.copier(value, state));\n  });\n\n  return clone;\n}\n\n/**\n * Deeply copy the values of the original, as well as any custom properties.\n */\nexport function copySetStrict<Value extends Set<any>>(set: Value, state: State): Value {\n  return copyOwnPropertiesStrict(set, copySetLoose(set, state), state);\n}\n","import {\n  copyArrayBuffer,\n  copyArrayLoose,\n  copyArrayStrict,\n  copyBlob,\n  copyDataView,\n  copyDate,\n  copyMapLoose,\n  copyMapStrict,\n  copyObjectLoose,\n  copyObjectStrict,\n  copyPrimitiveWrapper,\n  copyRegExp,\n  copySelf,\n  copySetLoose,\n  copySetStrict,\n} from './copier.js';\nimport type { InternalCopier } from './copier.ts';\nimport type { Cache } from './utils.ts';\n\nexport interface CopierMethods {\n  array?: InternalCopier<any[]>;\n  arrayBuffer?: InternalCopier<ArrayBuffer>;\n  asyncGenerator?: InternalCopier<AsyncGenerator>;\n  blob?: InternalCopier<Blob>;\n  dataView?: InternalCopier<DataView>;\n  date?: InternalCopier<Date>;\n  error?: InternalCopier<Error>;\n  generator?: InternalCopier<Generator>;\n  map?: InternalCopier<Map<any, any>>;\n  object?: InternalCopier<Record<string, any>>;\n  regExp?: InternalCopier<RegExp>;\n  set?: InternalCopier<Set<any>>;\n}\n\ninterface Copiers {\n  [key: string]: InternalCopier<any> | undefined;\n\n  Arguments: InternalCopier<Record<string, any>>;\n  Array: InternalCopier<any[]>;\n  ArrayBuffer: InternalCopier<ArrayBuffer>;\n  AsyncGenerator: InternalCopier<AsyncGenerator>;\n  Blob: InternalCopier<Blob>;\n  // eslint-disable-next-line @typescript-eslint/no-wrapper-object-types\n  Boolean: InternalCopier<Boolean>;\n  DataView: InternalCopier<DataView>;\n  Date: InternalCopier<Date>;\n  Error: InternalCopier<Error>;\n  Float32Array: InternalCopier<ArrayBuffer>;\n  Float64Array: InternalCopier<ArrayBuffer>;\n  Generator: InternalCopier<Generator>;\n\n  Int8Array: InternalCopier<ArrayBuffer>;\n  Int16Array: InternalCopier<ArrayBuffer>;\n  Int32Array: InternalCopier<ArrayBuffer>;\n  Map: InternalCopier<Map<any, any>>;\n  // eslint-disable-next-line @typescript-eslint/no-wrapper-object-types\n  Number: InternalCopier<Number>;\n  Object: InternalCopier<Record<string, any>>;\n  Promise: InternalCopier<Promise<any>>;\n  RegExp: InternalCopier<RegExp>;\n  Set: InternalCopier<Set<any>>;\n  // eslint-disable-next-line @typescript-eslint/no-wrapper-object-types\n  String: InternalCopier<String>;\n  WeakMap: InternalCopier<WeakMap<any, any>>;\n  WeakSet: InternalCopier<WeakSet<any>>;\n  Uint8Array: InternalCopier<ArrayBuffer>;\n  Uint8ClampedArray: InternalCopier<ArrayBuffer>;\n  Uint16Array: InternalCopier<ArrayBuffer>;\n  Uint32Array: InternalCopier<ArrayBuffer>;\n  Uint64Array: InternalCopier<ArrayBuffer>;\n}\n\nexport interface CreateCopierOptions {\n  createCache?: () => Cache;\n  methods?: CopierMethods;\n  strict?: boolean;\n}\n\nexport interface RequiredCreateCopierOptions extends Omit<Required<CreateCopierOptions>, 'methods'> {\n  copiers: Copiers;\n  methods: Required<CopierMethods>;\n}\n\nexport function createDefaultCache(): Cache {\n  return new WeakMap();\n}\n\nexport function getOptions({\n  createCache: createCacheOverride,\n  methods: methodsOverride,\n  strict,\n}: CreateCopierOptions): RequiredCreateCopierOptions {\n  const defaultMethods = {\n    array: strict ? copyArrayStrict : copyArrayLoose,\n    arrayBuffer: copyArrayBuffer,\n    asyncGenerator: copySelf,\n    blob: copyBlob,\n    dataView: copyDataView,\n    date: copyDate,\n    error: copySelf,\n    generator: copySelf,\n    map: strict ? copyMapStrict : copyMapLoose,\n    object: strict ? copyObjectStrict : copyObjectLoose,\n    regExp: copyRegExp,\n    set: strict ? copySetStrict : copySetLoose,\n  };\n\n  const methods = methodsOverride ? Object.assign(defaultMethods, methodsOverride) : defaultMethods;\n  const copiers = getTagSpecificCopiers(methods);\n  const createCache = createCacheOverride || createDefaultCache;\n\n  // Extra safety check to ensure that object and array copiers are always provided,\n  // avoiding runtime errors.\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  if (!copiers.Object || !copiers.Array) {\n    throw new Error('An object and array copier must be provided.');\n  }\n\n  return { createCache, copiers, methods, strict: Boolean(strict) };\n}\n\n/**\n * Get the copiers used for each specific object tag.\n */\nexport function getTagSpecificCopiers(methods: Required<CopierMethods>): Copiers {\n  return {\n    Arguments: methods.object,\n    Array: methods.array,\n    ArrayBuffer: methods.arrayBuffer,\n    AsyncGenerator: methods.asyncGenerator,\n    Blob: methods.blob,\n    Boolean: copyPrimitiveWrapper,\n    DataView: methods.dataView,\n    Date: methods.date,\n    Error: methods.error,\n    Float32Array: methods.arrayBuffer,\n    Float64Array: methods.arrayBuffer,\n    Generator: methods.generator,\n    Int8Array: methods.arrayBuffer,\n    Int16Array: methods.arrayBuffer,\n    Int32Array: methods.arrayBuffer,\n    Map: methods.map,\n    Number: copyPrimitiveWrapper,\n    Object: methods.object,\n    Promise: copySelf,\n    RegExp: methods.regExp,\n    Set: methods.set,\n    String: copyPrimitiveWrapper,\n    WeakMap: copySelf,\n    WeakSet: copySelf,\n    Uint8Array: methods.arrayBuffer,\n    Uint8ClampedArray: methods.arrayBuffer,\n    Uint16Array: methods.arrayBuffer,\n    Uint32Array: methods.arrayBuffer,\n    Uint64Array: methods.arrayBuffer,\n  };\n}\n","import type { State } from './copier.ts';\nimport { getOptions } from './options.js';\nimport type { CreateCopierOptions } from './options.ts';\nimport { getTag } from './utils.js';\n\nexport type { State } from './copier.ts';\nexport type { CreateCopierOptions } from './options.ts';\n\n/**\n * Create a custom copier based on custom options for any of the following:\n *   - `createCache` method to create a cache for copied objects\n *   - custom copier `methods` for specific object types\n *   - `strict` mode to copy all properties with their descriptors\n */\nexport function createCopier(options: CreateCopierOptions = {}) {\n  const { createCache, copiers } = getOptions(options);\n  const { Array: copyArray, Object: copyObject } = copiers;\n\n  function copier(value: any, state: State): any {\n    state.prototype = state.Constructor = undefined;\n\n    if (!value || typeof value !== 'object') {\n      return value;\n    }\n\n    if (state.cache.has(value)) {\n      return state.cache.get(value);\n    }\n\n    state.prototype = Object.getPrototypeOf(value);\n    // Using logical AND for speed, since optional chaining transforms to\n    // a local variable usage.\n    // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n    state.Constructor = state.prototype && state.prototype.constructor;\n\n    // plain objects\n    if (!state.Constructor || state.Constructor === Object) {\n      return copyObject(value as Record<string, any>, state);\n    }\n\n    // arrays\n    if (Array.isArray(value)) {\n      return copyArray(value, state);\n    }\n\n    const tagSpecificCopier = copiers[getTag(value)];\n\n    if (tagSpecificCopier) {\n      return tagSpecificCopier(value, state);\n    }\n\n    return typeof value.then === 'function' ? value : copyObject(value as Record<string, any>, state);\n  }\n\n  return function copy<Value>(value: Value): Value {\n    return copier(value, {\n      Constructor: undefined,\n      cache: createCache(),\n      copier,\n      prototype: undefined,\n    });\n  };\n}\n\n/**\n * Copy an value deeply as much as possible, where strict recreation of object properties\n * are maintained. All properties (including non-enumerable ones) are copied with their\n * original property descriptors on both objects and arrays.\n */\nexport const copyStrict = createCopier({ strict: true });\n\n/**\n * Copy an value deeply as much as possible.\n */\nexport const copy = createCopier();\n"],"names":[],"mappings":"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"}